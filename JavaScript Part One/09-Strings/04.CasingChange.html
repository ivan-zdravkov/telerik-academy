<html>
	<head>
		<title>Casing Change</title>
		<link href="styles/js-console.css" rel="stylesheet" />
	</head>
	
	<body>
		<span>Write a function that changes the text in all regions</span><br />

		<div id="js-console"></div>
		<script src="scripts/js-console.js"></script>
		 
		<script>
            String.prototype.replaceAt = function (index, character) {
                return this.substr(0, index) + character + this.substr(index + character.length);
            }

            function uppercaseify(text) {
                var index = 0;
                while (true) {
                    index = text.indexOf("<upcase>", index) + 1;
                    if (index == 0) {
                        break;
                    }
                    else 
                    {
                        index += 7;
                        for (var len = text.length; index < len ; index++)
                        {
                            if (text[index] != "<")
                            {
                                text = text.replaceAt(index, text[index].toUpperCase());
                            }
                            else 
                            {
                                break;
                            }
                        }
                        index += 9;
                    }
                }

                text = text.replace("<upcase>", "");
                text = text.replace("</upcase>", "");

                return text;
            }

            function lowercaseify(text) {
                var index = 0;
                while (true) {
                    index = text.indexOf("<lowcase>", index) + 1;
                    if (index == 0) {
                        break;
                    }
                    else {
                        index += 7;
                        for (var len = text.length; index < len ; index++) {
                            if (text[index] != "<") {
                                text = text.replaceAt(index, text[index].toLowerCase());
                            }
                            else {
                                break;
                            }
                        }
                        index += 9;
                    }
                }

                text = text.replace("<lowcase>", "");
                text = text.replace("</lowcase>", "");
                return text;
            }

            function mixcaseify(text) {
                var index = 0;
                while (true) {
                    index = text.indexOf("<mixcase>", index) + 1;
                    if (index == 0) {
                        break;
                    }
                    else {
                        index += 7;
                        for (var len = text.length; index < len ; index++) {
                            if (text[index] != "<") {
                                var random = Math.floor(Math.random() * 10);
                                if (random % 2 == 0)
                                {
                                    text = text.replaceAt(index, text[index].toLowerCase());
                                }
                                else
                                {
                                    text = text.replaceAt(index, text[index].toUpperCase());
                                }
                                
                            }
                            else {
                                break;
                            }
                        }
                        index += 9;
                    }
                }

                text = text.replace("<mixcase>", "");
                text = text.replace("</mixcase>", "");
                return text;
            }

            var text = "We are <mixcase>living</mixcase> in a <upcase>yellow submarine</upcase>. We <mixcase>don't</mixcase> have <lowcase>anything</lowcase> else.";

            text = uppercaseify(text).trim();
            text = lowercaseify(text).trim();
            text = mixcaseify(text).trim();
            jsConsole.writeLine(text);
		</script>
	</body>
</html>